<!DOCTYPE html>
<html>
<head>
    <title>Indian Car Racing</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Play Indian Car Racing - exciting car game with ads">
    
    <!-- AdMob SDK -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-app-pub-6302105448775587~3777252654" crossorigin="anonymous"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #000; color: white; overflow: hidden; width: 100vw; height: 100vh; }
        #gameContainer { position: relative; width: 100%; height: 100%; }
        canvas { display: block; background: #1a1a1a; }
        .ui { position: absolute; background: rgba(0,0,0,0.8); color: white; padding: 12px 20px; border-radius: 12px; z-index: 100; font-size: 18px; font-weight: bold; }
        #score { top: 20px; left: 20px; }
        #lives { top: 20px; right: 20px; color: #ff5252; }
        .btn { background: linear-gradient(45deg, #FF9800, #FF5722); color: white; padding: 15px 30px; border: none; border-radius: 10px; margin: 10px; cursor: pointer; font-size: 18px; font-weight: bold; box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3); transition: all 0.3s; }
        .btn:hover { transform: scale(1.05); box-shadow: 0 6px 20px rgba(255, 152, 0, 0.4); }
        .btn:active { transform: scale(0.95); }
        #adBtn { position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%); background: linear-gradient(45deg, #4CAF50, #45a049); }
        #startBtn { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 24px; padding: 20px 40px; }
        #gameTitle { position: absolute; top: 20%; left: 50%; transform: translateX(-50%); font-size: 48px; color: #FF9800; text-shadow: 3px 3px 6px rgba(0,0,0,0.5); }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>
        
        <div id="gameTitle">07 Indian Car Racing</div>
        <div id="score" class="ui">Score: 0</div>
        <div id="lives" class="ui">Lives: 3</div>
        
        <button id="startBtn" class="btn" onclick="startGame()">92 Start Game</button>
        <button id="adBtn" class="btn" onclick="showRewardedAd()" style="display:none;">97 Get 3 Lives (Watch Ad)</button>
    </div>

    <script>
        // AdMob Configuration
        const ADMOB_IDS = {
            interstitial: 'ca-app-pub-6302105448775587/5186924288',
            rewarded: 'ca-app-pub-6302105448775587/1000907894'
        };

        // Game Variables
        let score = 0, lives = 3, gameActive = false;
        let interstitialAd = null, rewardedAd = null;
        let canvas, ctx, player = { x: 0, y: 0, width: 60, height: 100 };
        let roadY = 0;

        // Initialize Game
        function init() {
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            initAds();
            setupPlayer();
            drawMenu();
        }

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            setupPlayer();
            if (gameActive) drawGame();
            else drawMenu();
        }

        function setupPlayer() {
            player.x = canvas.width / 2;
            player.y = canvas.height - 120;
        }

        function drawMenu() {
            ctx.fillStyle = '#1a1a1a';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Road background effect
            ctx.fillStyle = '#333';
            ctx.fillRect(canvas.width * 0.25, 0, canvas.width * 0.5, canvas.height);
        }

        function startGame() {
            gameActive = true;
            document.getElementById('startBtn').style.display = 'none';
            document.getElementById('adBtn').style.display = 'block';
            score = 0;
            lives = 3;
            updateUI();
            
            setTimeout(() => showInterstitialAd(), 1000);
            gameLoop();
        }

        function drawGame() {
            // Animated road background
            roadY = (roadY + 5) % canvas.height;
            
            // Background
            ctx.fillStyle = '#1a1a1a';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Road
            ctx.fillStyle = '#333';
            ctx.fillRect(canvas.width * 0.25, 0, canvas.width * 0.5, canvas.height);
            
            // Road markings
            ctx.fillStyle = 'yellow';
            for(let i = -40; i < canvas.height + 40; i += 40) {
                ctx.fillRect(canvas.width/2 - 5, (i + roadY) % (canvas.height + 40), 10, 20);
            }
            
            // Player car
            ctx.fillStyle = '#2196F3';
            ctx.fillRect(player.x - player.width/2, player.y - player.height/2, player.width, player.height);
            
            // Car details
            ctx.fillStyle = '#1976D2';
            ctx.fillRect(player.x - player.width/2 + 5, player.y - player.height/2 + 5, player.width - 10, 20);
            ctx.fillRect(player.x - player.width/2 + 5, player.y + player.height/2 - 25, player.width - 10, 20);
        }

        function gameLoop() {
            if (!gameActive) return;
            
            drawGame();
            score++;
            
            if (score % 200 === 0) {
                showInterstitialAd();
            }
            
            updateUI();
            requestAnimationFrame(gameLoop);
        }

        function updateUI() {
            document.getElementById('score').textContent = 'Score: ' + score;
            document.getElementById('lives').textContent = 'Lives: ' + lives;
            
            if (lives <= 0) {
                gameOver();
            }
        }

        function gameOver() {
            gameActive = false;
            document.getElementById('startBtn').style.display = 'block';
            document.getElementById('adBtn').style.display = 'none';
            document.getElementById('startBtn').textContent = '94 Play Again (Score: ' + score + ')';
            showInterstitialAd();
            drawMenu();
        }

        // AdMob Functions
        function initAds() {
            if (typeof google === 'undefined') {
                setTimeout(initAds, 1000);
                return;
            }

            interstitialAd = new google.ads.adsbygoogle.InterstitialAd();
            interstitialAd.adUnitId = ADMOB_IDS.interstitial;
            interstitialAd.addEventListener('adLoaded', () => console.log('Interstitial ready'));
            interstitialAd.addEventListener('adDismissed', loadInterstitialAd);
            loadInterstitialAd();

            rewardedAd = new google.ads.adsbygoogle.RewardedAd();
            rewardedAd.adUnitId = ADMOB_IDS.rewarded;
            rewardedAd.addEventListener('adLoaded', () => console.log('Rewarded ready'));
            rewardedAd.addEventListener('adDismissed', loadRewardedAd);
            rewardedAd.addEventListener('userEarnedReward', () => {
                lives += 3;
                alert('95 3 Lives Added! Continue playing!');
            });
            loadRewardedAd();
        }

        function loadInterstitialAd() {
            if (interstitialAd) interstitialAd.load();
        }

        function loadRewardedAd() {
            if (rewardedAd) rewardedAd.load();
        }

        function showInterstitialAd() {
            if (interstitialAd) {
                interstitialAd.show().catch(e => console.log('Interstitial error:', e));
            }
        }

        function showRewardedAd() {
            if (rewardedAd) {
                rewardedAd.show().catch(e => console.log('Rewarded error:', e));
            }
        }

        // Controls
        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            if (!gameActive) return;
            const rect = canvas.getBoundingClientRect();
            const x = e.touches[0].clientX - rect.left;
            player.x = Math.max(canvas.width * 0.25 + player.width/2, 
                              Math.min(canvas.width * 0.75 - player.width/2, x));
        });

        canvas.addEventListener('mousemove', (e) => {
            if (!gameActive) return;
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            player.x = Math.max(canvas.width * 0.25 + player.width/2, 
                              Math.min(canvas.width * 0.75 - player.width/2, x));
        });

        // Simulate obstacles
        setInterval(() => {
            if (gameActive && Math.random() < 0.1) {
                lives--;
                updateUI();
            }
        }, 2000);

        // Initialize game
        window.addEventListener('load', init);
    </script>
</body>
</html>